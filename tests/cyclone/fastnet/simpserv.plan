(* installs simpserv service *)

val objfile : string = 
"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
AAAAAAAAAAADAAMAGQAAAEcBAAA6AAAAEQEBAA8CAAAAAAAAAAAAABABAAAZ
AgAAAAAAAAAAAAAQAQAAJwIAAAAAAAAAAAAAEAEAADcCAAAAAAAAAAAAABAB
AABIAgAAAAAAAAAAAAAQAQAAWAIAAAAAAAAAAAAAEAEAAGsCAAAAAAAAAAAA
ABABAAB+AgAAAAAAAAAAAAAQAQAAAHNpbXBzZXJ2LnRhbABpbml0AGZuX180
AGR5bmluaXRfc2ltcHNlcnYAaWZ0cnVlJDI2AGlmZmFsc2UkMjcAaWZlbmQk
MjgASGVsbG9Xb3JsZAA/TnVsbFBvaW50ZXIAP1VuaW9uVmFyaWFudAA/QXJy
YXlCb3VuZHMAc3RyaW5nJDQ0AHN0cmluZ19yZWYkNDUAc3RyaW5nJDQxAHN0
cmluZ19yZWYkNDIAdHIkJDQwAHN0cmluZyQzOABzdHJpbmdfcmVmJDM5AHRy
JCQzNwBzdHJpbmckMzUAc3RyaW5nX3JlZiQzNgB0ciQkMzQAc3RyaW5nJDMy
AHN0cmluZ19yZWYkMzMAdHIkJDMxAHN0cmluZyQyOQBzdHJpbmdfcmVmJDMw
AHN0cmluZyQyMwBzdHJpbmdfcmVmJDI0AHN0cmluZyQyMQBzdHJpbmdfcmVm
JDIyAHN0cmluZyQxOQBzdHJpbmdfcmVmJDIwAHN0cmluZyQxNQBzdHJpbmdf
cmVmJDE2AHN0cmluZyQxMwBzdHJpbmdfcmVmJDE0AHN0cmluZyQ5AHN0cmlu
Z19yZWYkMTAAc3RyaW5nJDYAc3RyaW5nX3JlZiQ3AGlzX3VwZGF0ZWRfXzhf
ZmxhZwBHT1RfXzAkMwBHT1RfXzAkNABHT1RfXzAkNQBHT1RfXzAAZXhuY29u
X18zP2V4bgBHQ19tYWxsb2MAb3V0X29mX21lbW9yeQBOdWxsUG9pbnRlcl9w
a3QAVW5pb25WYXJpYW50X3BrdABBcnJheUJvdW5kc19wa3QAX196enp6X2ds
b2JhbF9jc3RrAF9fenp6el9hY3RpdmVfY3N0awBfX3p6enpfYWN0aXZlX2V4
bl9wa3QAAC5zdHJ0YWIALnN5bXRhYgAudGV4dAAuZGF0YQAuY3ljAC5yZWwu
dGV4dAAucmVsLmRhdGEALnJlbC5jeWMALnNoc3RydGFiAAAAAAAAAAAAAAAA
AAAAAAAAAAA0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAQAAAAYAAAAA
AAAANAAAAFADAAAAAAAAAAAAAAQAAAAAAAAAFwAAAAEAAAADAAAAAAAAAIQD
AAAwBAAAAAAAAAAAAAAEAAAAAAAAAB0AAAABAAAABgAAAAAAAAC0BwAAAAAA
AAAAAAAAAAAABAAAAAAAAAAiAAAACQAAAAAAAAAAAAAAtAcAALgCAAAHAAAA
AQAAAAQAAAAIAAAALAAAAAkAAAAAAAAAAAAAAGwKAACQAAAABwAAAAIAAAAE
AAAACAAAADYAAAAJAAAAAAAAAAAAAAD8CgAAAAAAAAcAAAADAAAABAAAAAgA
AAAJAAAAAgAAAAAAAAAAAAAA/AoAALADAAAIAAAAMgAAAAEAAAAQAAAAAQAA
AAMAAAAAAAAAAAAAAKwOAACUAgAAAAAAAAAAAAABAAAAAAAAAD8AAAADAAAA
AAAAAAAAAABAEQAASQAAAAAAAAAAAAAAAQAAAAAAAAA=
====
"

val tofile : string = 
"OWJvZ3VzX29wdGlvbiQxAEdPVF90X18yPwBHT1RfdF9fMj9tZW0AP2V4bm5h
bWUAP3N0cgBMaXN0P2xpc3Q/AHMxAHMyAGUxAGUyAD9TAHZhbHVlPwBwb3Bf
cGt0PwA/RQA/U3YARklMRT8AciQ4AF8/Y3N0a190eXBlPwBfP2NzdGtfdHlw
ZT9tZW0AbXB0ciQxMgBtcHRyJDExAHZhAExpc3Q/bGlzdD9tZW0AciQxNwBt
cHRyJDE4AD9leG4AciQyNQByJDQzAAk0bRBTQ7IBIQMAAABMBSEBAQMAVgdW
CUYJUmEHC0YNQkwLRglCVhVMF2EVF2ERF0wZVg06HR86GyFhGSNWD2ElJ1YR
YSkrVhNhLS9WG2EzJ2E1L0AxN3M5czdqBSsvbQA7PQA/Q0FBEwdDQREHRUEP
BUdBDQVJRktCKgUTTSEBAU8AYRFRRlNCKgNVIQEBVwBGWUJWHUwfOgkfOl9h
YV1jYWUnYWcrYWkvQGs3c21tAG89AD9DcUETB3NBEQd1QQ8Fd0ENBXlGe0JG
X0IqA38hAQGBAEaDQioJD1t9hWFdH2GJJ2GLK2GNL0CPN3ORbQCTPQA/Q5VB
EweXQREHmUEPBZtBDQWdTCNMJSEDAAGjAEwtVithp6khAwABqwBcKwGtYa9R
VjNGqUIqA7UhAQG3AGEVuVJjuSoDvSEBAb8AOsEfOgnDYbvFYccnYckrYcsv
QM03c89tANE9AD9D00ETB9VBEQfXQQ8F2UENBdtBKwHdOqkfOsHhOgnjYV3l
YecnYekrYesvQO03c+9tAPE9AD9D80ETB/VBEQf3QQ8F+UENBftBKwH9Ov8f
Ot8AAWFdAgFhBAEnYQYBK2EIAS9ACgE3cwwBbQAOAT0AP0MQAUETBxIBQREH
FAFBDwUWAUENBRgBIQUAAQAAQB83cx4BbQAgAT0AP0MiAUETByQBQREHJgFB
DwUoAUENBSoBSQwxRjABQnYuATIBKgM0ASEBATYBAEkKdjoBMgEqAzwBIQEB
PgEAKgOFIQEBQgEAUmNEASoDRgEhAQFIAQAqA30hAQFMAQBSY04BKgNQASEB
AVIBAEkNdlYBMgEqA1gBIQEBWgEAKgNbIQEBXgEAUmNgASoDYgEhAQFkAQBJ
C3ZoATIBKgNqASEBAWwBACoDTSEBAXABAFJjcgEqA3QBIQEBdgEASRB2egEy
ASoDfAEhAQF+AQBJFHaCATIBKgOEASEBAYYBAEkFdooBMgEqA4wBIQEBjgEA
SR12kgEyASoDlAEhAQGWAQBJBHaaATIBKgOcASEBAZ4BAEYcAUIqA6IBIQEB
pAEATANGqAFCKgOqASEBAawBADQ/cqFSpWYAVVUAQUMvQUMrQVRiA0FTUwUP
HwBmAHJTUrFmAFALs2YAVgEAQUMvQUMrQVRiA0FTUwcXH0FDSwBUHAEAVgMA
AEFDL0FDK0FUYgNBU1MFFR9BQ1kAQUMvQUMrQVRiA0FTUwUVH0FDewBBQy9B
QytBVGIDQVNTBRUfQUODAEFDL0FDK0FUYgNBU1MBCR8AQUMvQUMrQVRiA0FT
UwUTHwByFwB2AAAyAQBQLgEJAFA6AQkAUFYBCQBQaAEJAFB6AQkAUIIBCQBQ
igEJAFCSAQkAUJoBCQByXwByUwBSqAFSBQA8sAEASQVwb3BfcnVudGltZS50
YWxpAHNpbXBzZXJ2X2kudGFsaQBFA3NpbXBzZXJ2X2UudGFsaQBBAUsBQwcB
AQEDAQUFA4djFQGfbSEBKjQ0ADNGIWNSQQEyQQMxQQM1QQUzQQMxbScANkYn
Y1JBBzFBAzJtKQAyRiljUkEJNAF7bS8BKjQ0ADNGL2NSQQEyQQM0bTEANUYx
Y1JBCzkBGgFtNQEqNDQAM0Y1Y1JBATRqDQAAN0EPM0ERMUITFQAANkEXNWNS
cwM3QRk1Y1JzAzdBGzVjUnMDMUEdNAFLbTcBKjQ0ADNGN2NSQQEyQQMxQQM1
QR8zQSEyASwBTgoBLAFOCgEsAU4KZEkBOAEjQgwAACU0FUwVAAFAASNCCgAA
JzQVTBUAAUoBFVJjAAFAASNCCgAAJzQVTBUAAVQBFVJjAAFcASNCDQAAKTQV
TBUAAWYBFVJjAAFuASNCCwAAKzQVTBUAAXgBFVJjAAFAASNCCgAAJzQVTBUA
AYABI0IQAAAtNBVMFQABiAEjQhQAAC80FUwVAAFcASNCDQAAKTQVTBUAAZAB
I0IFAAAxNBVMFQABQAEjQgoAACc0FUwVAAGYASNCHQAAMzQVTBUAAaABI0IE
AAA1NBVMFQABpgEVNBEAAYMVNDcAAVkVNDkAAagBO0wVTBVMFUwVAAGuARVM
FQABDRU0PQA=
====
"

fun remotePrint(src : unit, dummy: unit) : unit=
  let val s : unit = (toString(getSrc()) ^ (" and " ^ (toString(thisHost()) ^
	" say : hello!\n")))
  in
    (install_service(objfile, tofile);
     OnNeighbor(|print|(s), src, 1, getSrcDev()))
  end

fun doit() : unit =
  let val d : unit = getDevs() in
    foldr(remotePrint, d, "")
  end

val entry_fun  : unit = "doit"
val entry_args : unit = []
val entry_src  : unit = "blah"
val entry_eval : unit = "cyclone:4001"
val entry_rb   : unit = 20
